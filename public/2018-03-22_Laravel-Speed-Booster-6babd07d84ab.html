<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Laravel Speed Booster</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Laravel Speed Booster</h1>
</header>
<section data-field="subtitle" class="p-summary">
I‚Äôm guessing since you‚Äôre here, you‚Äôre already using Laravel, and I‚Äôm guessing also that you used it enough time to reach this level‚Ä¶
</section>
<section data-field="body" class="e-content">
<section name="f746" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="2a13" id="2a13" class="graf graf--figure graf--leading"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.3%;"></div><img class="graf-image" data-image-id="1*Ihd8eEM7cUZ4jXpMYSL2xQ.jpeg" data-width="1600" data-height="900" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*Ihd8eEM7cUZ4jXpMYSL2xQ.jpeg"></div></figure><h3 name="edfc" id="edfc" class="graf graf--h3 graf-after--figure graf--title">Laravel Speed¬†Booster</h3><p name="d434" id="d434" class="graf graf--p graf-after--h3 graf--trailing">I‚Äôm guessing since you‚Äôre here, you‚Äôre already using Laravel, and I‚Äôm guessing also that you used it enough time to reach this level, where you start tweaking how it works and improving it.¬†<br>Yes, I agree Laravel is an awesome PHP framework, but it‚Äôs too abstract and generic in its code base for most applications, where it tries to cover all cases that an application might have.<br>But, whenever you make something too abstract or generic, you add extra unnecessary complexity and wasted speed to it, which if you‚Äôre concerned about the performance, it will definitely annoy you (which was the case in my current company, so we investigated).</p></div></div></section><section name="b63a" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><blockquote name="136f" id="136f" class="graf graf--pullquote graf--leading graf--trailing"><a href="https://www.awin1.com/cread.php?awinmid=10748&amp;awinaffid=628669&amp;clickref=laravelspeed&amp;p=%5B%5Bhttps%3A%2F%2Fmedium.com%2Fswlh%2Flaravel-speed-booster-6babd07d84ab%5D%5D" data-href="https://www.awin1.com/cread.php?awinmid=10748&amp;awinaffid=628669&amp;clickref=laravelspeed&amp;p=%5B%5Bhttps%3A%2F%2Fmedium.com%2Fswlh%2Flaravel-speed-booster-6babd07d84ab%5D%5D" class="markup--anchor markup--pullquote-anchor" rel="noopener" target="_blank">Before you continue reading I would really like you to check this really nice e-commerce (Ali-express). It has really amazing and cheap products. by just checking it out, you‚Äôre supporting me to gain some money and dedicate more time to write more useful things in my blog for¬†people.</a></blockquote></div></div></section><section name="75f3" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="b831" id="b831" class="graf graf--p graf--leading">Of course, when we talk about performance improvements here, we‚Äôre talking about milliseconds, especially if you worry about <a href="https://developers.google.com/speed/docs/insights/Server" data-href="https://developers.google.com/speed/docs/insights/Server" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Google‚Äôs recommendation</a> which is below 200ms.</p><blockquote name="278a" id="278a" class="graf graf--blockquote graf-after--p">You should reduce your server response time under 200ms. There are dozens of potential factors which may slow down the response of your server: slow application logic, slow database queries, slow routing, frameworks, libraries, resource CPU starvation, or memory starvation.</blockquote><p name="8f63" id="8f63" class="graf graf--p graf-after--blockquote graf--trailing">There are some client side improvements which can really improve your user experience in terms of website speed <a href="https://medium.com/@ra.hul/kickass-your-website-front-end-speed-fedeaa51df36" data-href="https://medium.com/@ra.hul/kickass-your-website-front-end-speed-fedeaa51df36" class="markup--anchor markup--p-anchor" target="_blank">which other experts can talk about</a>, but we‚Äôre going to talk about server side improvement in here.</p></div></div></section><section name="b88f" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="2393" id="2393" class="graf graf--p graf--leading">Here we go..</p><p name="ed36" id="ed36" class="graf graf--p graf-after--p">So after some investigating and profiling, we found potential places to improve in Laravel:</p><ul class="postList"><li name="b0de" id="b0de" class="graf graf--li graf-after--p">Views Pipeline</li><li name="f82a" id="f82a" class="graf graf--li graf-after--li">Views Rendering</li><li name="795c" id="795c" class="graf graf--li graf-after--li">Too many middleWares</li><li name="fa80" id="fa80" class="graf graf--li graf-after--li">Routes caching:</li><li name="3524" id="3524" class="graf graf--li graf-after--li">Other PHP optimization</li></ul><h3 name="6f44" id="6f44" class="graf graf--h3 graf-after--li">Views Pipeline</h3><p name="0e39" id="0e39" class="graf graf--p graf-after--h3">As we said earlier Laravel adds a lot of generic stuff to include all possibilities, in the case of Views it‚Äôs the loading of data and the checking processes that take place when the render function happens.</p><p name="ce07" id="ce07" class="graf graf--p graf-after--p">To be more specific, one of the overheads that happen on every render is the function <strong class="markup--strong markup--p-strong">gatherData </strong>in <strong class="markup--strong markup--p-strong">Illuminate\View</strong>, which is usually a lot btw, if you have a very nested structure for your website i.e. a lot of @includes, @sections, @layouts, @for loops,..,.etc.</p><p name="2dcf" id="2dcf" class="graf graf--p graf-after--p">You‚Äôd find inside this function the following code:</p><pre name="4a95" id="4a95" class="graf graf--pre graf-after--p">$data = array_merge($this-&gt;factory-&gt;getShared(), $this-&gt;data);</pre><pre name="dbbc" id="dbbc" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">foreach </strong>($data <strong class="markup--strong markup--pre-strong">as </strong>$key =&gt; $value) {<br>    <strong class="markup--strong markup--pre-strong">if </strong>($value <strong class="markup--strong markup--pre-strong">instanceof </strong>Renderable) {<br>        $data[$key] = $value-&gt;render();<br>    }<br>}</pre><pre name="222b" id="222b" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">return </strong>$data;</pre><p name="5af9" id="5af9" class="graf graf--p graf-after--pre">And in my experience, few people use the Views with Renderable passed.</p><p name="a872" id="a872" class="graf graf--p graf-after--p">So what would be awesome is to override Laravel‚Äôs functionality [I‚Äôm not going to mention how; a lot of hows on google for this] and make the code as below:</p><pre name="3925" id="3925" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">protected function </strong>gatherData()<br>{<br>    $data = array_merge($this-&gt;factory-&gt;getShared(), $this-&gt;data);<br>    <br>    <strong class="markup--strong markup--pre-strong">return </strong>$data;<br>}</pre><p name="c179" id="c179" class="graf graf--p graf-after--pre">After doing this, you‚Äôll notice an increase in performance, which varies based on your server‚Äôs speed/page size/so on.</p><p name="8232" id="8232" class="graf graf--p graf-after--p">The increment in our case was about 5‚Äì10% [around 20ms] of the server-side load time.</p><h3 name="8b29" id="8b29" class="graf graf--h3 graf-after--p">Views Rendering:</h3><p name="b691" id="b691" class="graf graf--p graf-after--h3">Views Rendering as mentioned above is something that happens a lot during 1 session call, and the thing is that the pipeline of this <a href="https://laravel.com/api/5.3/Illuminate/View/View.html#method_render" data-href="https://laravel.com/api/5.3/Illuminate/View/View.html#method_render" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Render function</a> is that it works in a recursive way.</p><p name="58a4" id="58a4" class="graf graf--p graf-after--p">That is normal if you have a page that contains a couple of sections and not a lot of nested views.but, if you use a lot of @includes / @sections¬†, especially the ones inside ForLoops then you‚Äôd probably have a big decrement in speed.</p><p name="a855" id="a855" class="graf graf--p graf-after--p">let‚Äôs put it this way, if you have 100 products in a page, it will be something like this¬†:</p><pre name="f5ea" id="f5ea" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">@foreach (</strong>$products <strong class="markup--strong markup--pre-strong">as </strong>$key =&gt; $item)<strong class="markup--strong markup--pre-strong"><br>        @include(<br>          </strong>&#39;productView&#39;,<br>          [<br>            &#39;product&#39; =&gt; $item,<br>          ]<br>        <strong class="markup--strong markup--pre-strong">)<br>@endforeach</strong></pre><p name="d3cf" id="d3cf" class="graf graf--p graf-after--pre">and let‚Äôs say inside the productView there are 2 other includes. this case will result in 200 render calls when the view is rendered.<br>And after we profiled our application we found that the speed decreases significantly because of this. the solutions to solve this is to either:</p><ul class="postList"><li name="4acd" id="4acd" class="graf graf--li graf-after--p">Set a standard to avoid more than 2 nested levels to avoid too many rendering.</li><li name="aa70" id="aa70" class="graf graf--li graf-after--li">Flatten your views and use less includes (which of course is not a nice solution esp. if it‚Äôs a platform that is maintained over a long time).</li><li name="ed0c" id="ed0c" class="graf graf--li graf-after--li">Use a library that will flatten your views on Production Deployment process (Since I didn‚Äôt find a package that does that, so I wrote one <a href="https://github.com/Te-cho/compile-blades" data-href="https://github.com/Te-cho/compile-blades" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Compile-Blades</a>).<br>(Do note that if you have too much of code in your blade it will also create a big decrement in speed, so you have to choose a middle ground).</li></ul><h3 name="d60f" id="d60f" class="graf graf--h3 graf-after--li">Too many middleWares:</h3><p name="32da" id="32da" class="graf graf--p graf-after--h3">Maybe you know, maybe you don‚Äôt that Laravel has a lot of pipelines overhead when it comes to its main feature, so I‚Äôd suggest not to use a lot of Middlewares since have pre&amp;post calls to every MiddleWare. I would go for 5 max middleWares as a best practice.</p><h3 name="294d" id="294d" class="graf graf--h3 graf-after--p">Routes caching:</h3><p name="5ebe" id="5ebe" class="graf graf--p graf-after--h3">I will quote what <strong class="markup--strong markup--p-strong">Ionu»õ BƒÉjescu</strong> said in an article which was explained better than I‚Äôll ever do¬†: (<a href="https://bajescu.com/posts/view/improving-your-laravel-application-performance" data-href="https://bajescu.com/posts/view/improving-your-laravel-application-performance" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">improving Laravel performance</strong></a>)</p><blockquote name="5c4c" id="5c4c" class="graf graf--blockquote graf-after--p">Routing is also an expensive task in laravel. To cache the routes.php file run the below command:</blockquote><blockquote name="4b4b" id="4b4b" class="graf graf--blockquote graf-after--blockquote"><code class="markup--code markup--blockquote-code"><em class="markup--em markup--blockquote-em">php artisan route:cache</em></code></blockquote><blockquote name="7125" id="7125" class="graf graf--blockquote graf-after--blockquote">Mind that it doesn‚Äôt work with closures. In case you‚Äôre using closures this is a great chance to move them into a controller, as the artisan command will throw an exception when trying to compile routes that are bound to closures instead of proper controller methods.¬†<br>In the same as the config cache, any changes to routes.php will not have any effect anymore. To refresh the cache, run the above command everytime you do a change to the routes file. To completely get rid of the route cache, run the below command:</blockquote><blockquote name="081c" id="081c" class="graf graf--blockquote graf-after--blockquote"><code class="markup--code markup--blockquote-code"><em class="markup--em markup--blockquote-em">php artisan route:clear</em></code></blockquote><h3 name="9a3a" id="9a3a" class="graf graf--h3 graf-after--blockquote">Other PHP optimization</h3><p name="df66" id="df66" class="graf graf--p graf-after--h3">A couple of other stuff to check, which will improve your website speed significantly are:</p><ul class="postList"><li name="51a9" id="51a9" class="graf graf--li graf-after--p">Config caching</li><li name="11bd" id="11bd" class="graf graf--li graf-after--li">Classmap optimization</li><li name="f47f" id="f47f" class="graf graf--li graf-after--li">Optimizing the composer autoload</li></ul><p name="8720" id="8720" class="graf graf--p graf-after--li">Those can be also checked out in this <a href="https://bajescu.com/posts/view/improving-your-laravel-application-performance" data-href="https://bajescu.com/posts/view/improving-your-laravel-application-performance" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">technically detailed article</a>.</p><p name="376a" id="376a" class="graf graf--p graf-after--p">In my experience, if you do all those and u didn‚Äôt have them before, you‚Äôd gain an improvement of 20‚Äì50% in your server page load time.</p><p name="4a64" id="4a64" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Fyi, you should really buy one of those </strong><a href="http://tidd.ly/8f345c71" data-href="http://tidd.ly/8f345c71" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">programmers laptop/workstation stickers</strong></a><strong class="markup--strong markup--p-strong">, they‚Äôre amazing üòç.</strong></p><p name="964c" id="964c" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Other Useful Articles:</strong></p><ul class="postList"><li name="72d9" id="72d9" class="graf graf--li graf-after--p"><a href="https://medium.com/teknomuslim/simply-boost-laravel-performance-in-production-7e5c63e32ffd" data-href="https://medium.com/teknomuslim/simply-boost-laravel-performance-in-production-7e5c63e32ffd" class="markup--anchor markup--li-anchor" rel="nofollow" target="_blank">https://medium.com/teknomuslim/simply-boost-laravel-performance-in-production-7e5c63e32ffd</a></li></ul><figure name="8ed2" id="8ed2" class="graf graf--figure graf-after--li graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 327px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46.7%;"></div><img class="graf-image" data-image-id="1*yzwBmpQT-eCGxwJSDLnnVA.png" data-width="750" data-height="350" src="https://cdn-images-1.medium.com/max/800/1*yzwBmpQT-eCGxwJSDLnnVA.png"></div></figure></div></div></section><section name="754d" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="e34b" id="e34b" class="graf graf--figure graf--leading"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 35px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 5%;"></div><a href="https://medium.com/swlh" data-href="https://medium.com/swlh" class="graf-imageAnchor" data-action="image-link" data-action-observe-only="true"><img class="graf-image" data-image-id="1*YqDjlKFwScoQYQ62DWEdig.png" data-width="2000" data-height="100" src="https://cdn-images-1.medium.com/max/800/1*YqDjlKFwScoQYQ62DWEdig.png"></a></div></figure><h4 name="48f8" id="48f8" class="graf graf--h4 graf-after--figure">This story is published in <a href="https://medium.com/swlh" data-href="https://medium.com/swlh" class="markup--anchor markup--h4-anchor" target="_blank">The Startup</a>, Medium‚Äôs largest entrepreneurship publication followed by 308,589+¬†people.</h4><h4 name="24b8" id="24b8" class="graf graf--h4 graf-after--h4">Subscribe to receive <a href="http://growthsupply.com/the-startup-newsletter/" data-href="http://growthsupply.com/the-startup-newsletter/" class="markup--anchor markup--h4-anchor" rel="nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow nofollow nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow nofollow noopener nofollow noopener nofollow noopener nofollow nofollow noopener nofollow nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener noopener noopener nofollow noopener nofollow noopener nofollow noopener noopener nofollow noopener nofollow noopener nofollow noopener noopener nofollow noopener nofollow noopener noopener nofollow noopener noopener nofollow noopener nofollow noopener nofollow noopener noopener noopener noopener noopener noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener nofollow noopener noopener nofollow noopener nofollow noopener noopener nofollow noopener noopener nofollow noopener noopener nofollow noopener nofollow noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener noopener nofollow noopener nofollow noopener noopener noopener" target="_blank">our top stories¬†here</a>.</h4><figure name="70f4" id="70f4" class="graf graf--figure graf-after--h4 graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 35px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 5%;"></div><a href="https://medium.com/swlh" data-href="https://medium.com/swlh" class="graf-imageAnchor" data-action="image-link" data-action-observe-only="true"><img class="graf-image" data-image-id="1*ouK9XR4xuNWtCes-TIUNAw.png" data-width="2000" data-height="100" src="https://cdn-images-1.medium.com/max/800/1*ouK9XR4xuNWtCes-TIUNAw.png"></a></div></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@abidul.rmdn" class="p-author h-card">Abidul Ramadan</a> on <a href="https://medium.com/p/6babd07d84ab"><time class="dt-published" datetime="2018-03-22T12:58:26.506Z">March 22, 2018</time></a>.</p><p><a href="https://medium.com/@abidul.rmdn/laravel-speed-booster-6babd07d84ab" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on July 28, 2019.</p></footer></article></body></html>